{"ast":null,"code":"/*! @azure/msal-common v13.3.1 2023-10-27 */\n'use strict';\n\nimport { AUTHORITY_METADATA_CONSTANTS } from '../../utils/Constants.js';\nimport { TimeUtils } from '../../utils/TimeUtils.js';\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n\nvar AuthorityMetadataEntity =\n/** @class */\nfunction () {\n  function AuthorityMetadataEntity() {\n    this.expiresAt = TimeUtils.nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;\n  }\n  /**\r\n   * Update the entity with new aliases, preferred_cache and preferred_network values\r\n   * @param metadata\r\n   * @param fromNetwork\r\n   */\n\n\n  AuthorityMetadataEntity.prototype.updateCloudDiscoveryMetadata = function (metadata, fromNetwork) {\n    this.aliases = metadata.aliases;\n    this.preferred_cache = metadata.preferred_cache;\n    this.preferred_network = metadata.preferred_network;\n    this.aliasesFromNetwork = fromNetwork;\n  };\n  /**\r\n   * Update the entity with new endpoints\r\n   * @param metadata\r\n   * @param fromNetwork\r\n   */\n\n\n  AuthorityMetadataEntity.prototype.updateEndpointMetadata = function (metadata, fromNetwork) {\n    this.authorization_endpoint = metadata.authorization_endpoint;\n    this.token_endpoint = metadata.token_endpoint;\n    this.end_session_endpoint = metadata.end_session_endpoint;\n    this.issuer = metadata.issuer;\n    this.endpointsFromNetwork = fromNetwork;\n    this.jwks_uri = metadata.jwks_uri;\n  };\n  /**\r\n   * Save the authority that was used to create this cache entry\r\n   * @param authority\r\n   */\n\n\n  AuthorityMetadataEntity.prototype.updateCanonicalAuthority = function (authority) {\n    this.canonical_authority = authority;\n  };\n  /**\r\n   * Reset the exiresAt value\r\n   */\n\n\n  AuthorityMetadataEntity.prototype.resetExpiresAt = function () {\n    this.expiresAt = TimeUtils.nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;\n  };\n  /**\r\n   * Returns whether or not the data needs to be refreshed\r\n   */\n\n\n  AuthorityMetadataEntity.prototype.isExpired = function () {\n    return this.expiresAt <= TimeUtils.nowSeconds();\n  };\n  /**\r\n   * Validates an entity: checks for all expected params\r\n   * @param entity\r\n   */\n\n\n  AuthorityMetadataEntity.isAuthorityMetadataEntity = function (key, entity) {\n    if (!entity) {\n      return false;\n    }\n\n    return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) === 0 && entity.hasOwnProperty(\"aliases\") && entity.hasOwnProperty(\"preferred_cache\") && entity.hasOwnProperty(\"preferred_network\") && entity.hasOwnProperty(\"canonical_authority\") && entity.hasOwnProperty(\"authorization_endpoint\") && entity.hasOwnProperty(\"token_endpoint\") && entity.hasOwnProperty(\"issuer\") && entity.hasOwnProperty(\"aliasesFromNetwork\") && entity.hasOwnProperty(\"endpointsFromNetwork\") && entity.hasOwnProperty(\"expiresAt\") && entity.hasOwnProperty(\"jwks_uri\");\n  };\n\n  return AuthorityMetadataEntity;\n}();\n\nexport { AuthorityMetadataEntity };","map":{"version":3,"names":["AUTHORITY_METADATA_CONSTANTS","TimeUtils","AuthorityMetadataEntity","expiresAt","nowSeconds","REFRESH_TIME_SECONDS","prototype","updateCloudDiscoveryMetadata","metadata","fromNetwork","aliases","preferred_cache","preferred_network","aliasesFromNetwork","updateEndpointMetadata","authorization_endpoint","token_endpoint","end_session_endpoint","issuer","endpointsFromNetwork","jwks_uri","updateCanonicalAuthority","authority","canonical_authority","resetExpiresAt","isExpired","isAuthorityMetadataEntity","key","entity","indexOf","CACHE_KEY","hasOwnProperty"],"sources":["F:/Bovis/Front/bovis-dev/node_modules/@azure/msal-common/dist/cache/entities/AuthorityMetadataEntity.js"],"sourcesContent":["/*! @azure/msal-common v13.3.1 2023-10-27 */\n'use strict';\nimport { AUTHORITY_METADATA_CONSTANTS } from '../../utils/Constants.js';\nimport { TimeUtils } from '../../utils/TimeUtils.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\nvar AuthorityMetadataEntity = /** @class */ (function () {\r\n    function AuthorityMetadataEntity() {\r\n        this.expiresAt = TimeUtils.nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;\r\n    }\r\n    /**\r\n     * Update the entity with new aliases, preferred_cache and preferred_network values\r\n     * @param metadata\r\n     * @param fromNetwork\r\n     */\r\n    AuthorityMetadataEntity.prototype.updateCloudDiscoveryMetadata = function (metadata, fromNetwork) {\r\n        this.aliases = metadata.aliases;\r\n        this.preferred_cache = metadata.preferred_cache;\r\n        this.preferred_network = metadata.preferred_network;\r\n        this.aliasesFromNetwork = fromNetwork;\r\n    };\r\n    /**\r\n     * Update the entity with new endpoints\r\n     * @param metadata\r\n     * @param fromNetwork\r\n     */\r\n    AuthorityMetadataEntity.prototype.updateEndpointMetadata = function (metadata, fromNetwork) {\r\n        this.authorization_endpoint = metadata.authorization_endpoint;\r\n        this.token_endpoint = metadata.token_endpoint;\r\n        this.end_session_endpoint = metadata.end_session_endpoint;\r\n        this.issuer = metadata.issuer;\r\n        this.endpointsFromNetwork = fromNetwork;\r\n        this.jwks_uri = metadata.jwks_uri;\r\n    };\r\n    /**\r\n     * Save the authority that was used to create this cache entry\r\n     * @param authority\r\n     */\r\n    AuthorityMetadataEntity.prototype.updateCanonicalAuthority = function (authority) {\r\n        this.canonical_authority = authority;\r\n    };\r\n    /**\r\n     * Reset the exiresAt value\r\n     */\r\n    AuthorityMetadataEntity.prototype.resetExpiresAt = function () {\r\n        this.expiresAt = TimeUtils.nowSeconds() + AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS;\r\n    };\r\n    /**\r\n     * Returns whether or not the data needs to be refreshed\r\n     */\r\n    AuthorityMetadataEntity.prototype.isExpired = function () {\r\n        return this.expiresAt <= TimeUtils.nowSeconds();\r\n    };\r\n    /**\r\n     * Validates an entity: checks for all expected params\r\n     * @param entity\r\n     */\r\n    AuthorityMetadataEntity.isAuthorityMetadataEntity = function (key, entity) {\r\n        if (!entity) {\r\n            return false;\r\n        }\r\n        return (key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) === 0 &&\r\n            entity.hasOwnProperty(\"aliases\") &&\r\n            entity.hasOwnProperty(\"preferred_cache\") &&\r\n            entity.hasOwnProperty(\"preferred_network\") &&\r\n            entity.hasOwnProperty(\"canonical_authority\") &&\r\n            entity.hasOwnProperty(\"authorization_endpoint\") &&\r\n            entity.hasOwnProperty(\"token_endpoint\") &&\r\n            entity.hasOwnProperty(\"issuer\") &&\r\n            entity.hasOwnProperty(\"aliasesFromNetwork\") &&\r\n            entity.hasOwnProperty(\"endpointsFromNetwork\") &&\r\n            entity.hasOwnProperty(\"expiresAt\") &&\r\n            entity.hasOwnProperty(\"jwks_uri\"));\r\n    };\r\n    return AuthorityMetadataEntity;\r\n}());\n\nexport { AuthorityMetadataEntity };\n"],"mappings":"AAAA;AACA;;AACA,SAASA,4BAAT,QAA6C,0BAA7C;AACA,SAASC,SAAT,QAA0B,0BAA1B;AAEA;AACA;AACA;AACA;;AACA,IAAIC,uBAAuB;AAAG;AAAe,YAAY;EACrD,SAASA,uBAAT,GAAmC;IAC/B,KAAKC,SAAL,GAAiBF,SAAS,CAACG,UAAV,KAAyBJ,4BAA4B,CAACK,oBAAvE;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIH,uBAAuB,CAACI,SAAxB,CAAkCC,4BAAlC,GAAiE,UAAUC,QAAV,EAAoBC,WAApB,EAAiC;IAC9F,KAAKC,OAAL,GAAeF,QAAQ,CAACE,OAAxB;IACA,KAAKC,eAAL,GAAuBH,QAAQ,CAACG,eAAhC;IACA,KAAKC,iBAAL,GAAyBJ,QAAQ,CAACI,iBAAlC;IACA,KAAKC,kBAAL,GAA0BJ,WAA1B;EACH,CALD;EAMA;AACJ;AACA;AACA;AACA;;;EACIP,uBAAuB,CAACI,SAAxB,CAAkCQ,sBAAlC,GAA2D,UAAUN,QAAV,EAAoBC,WAApB,EAAiC;IACxF,KAAKM,sBAAL,GAA8BP,QAAQ,CAACO,sBAAvC;IACA,KAAKC,cAAL,GAAsBR,QAAQ,CAACQ,cAA/B;IACA,KAAKC,oBAAL,GAA4BT,QAAQ,CAACS,oBAArC;IACA,KAAKC,MAAL,GAAcV,QAAQ,CAACU,MAAvB;IACA,KAAKC,oBAAL,GAA4BV,WAA5B;IACA,KAAKW,QAAL,GAAgBZ,QAAQ,CAACY,QAAzB;EACH,CAPD;EAQA;AACJ;AACA;AACA;;;EACIlB,uBAAuB,CAACI,SAAxB,CAAkCe,wBAAlC,GAA6D,UAAUC,SAAV,EAAqB;IAC9E,KAAKC,mBAAL,GAA2BD,SAA3B;EACH,CAFD;EAGA;AACJ;AACA;;;EACIpB,uBAAuB,CAACI,SAAxB,CAAkCkB,cAAlC,GAAmD,YAAY;IAC3D,KAAKrB,SAAL,GAAiBF,SAAS,CAACG,UAAV,KAAyBJ,4BAA4B,CAACK,oBAAvE;EACH,CAFD;EAGA;AACJ;AACA;;;EACIH,uBAAuB,CAACI,SAAxB,CAAkCmB,SAAlC,GAA8C,YAAY;IACtD,OAAO,KAAKtB,SAAL,IAAkBF,SAAS,CAACG,UAAV,EAAzB;EACH,CAFD;EAGA;AACJ;AACA;AACA;;;EACIF,uBAAuB,CAACwB,yBAAxB,GAAoD,UAAUC,GAAV,EAAeC,MAAf,EAAuB;IACvE,IAAI,CAACA,MAAL,EAAa;MACT,OAAO,KAAP;IACH;;IACD,OAAQD,GAAG,CAACE,OAAJ,CAAY7B,4BAA4B,CAAC8B,SAAzC,MAAwD,CAAxD,IACJF,MAAM,CAACG,cAAP,CAAsB,SAAtB,CADI,IAEJH,MAAM,CAACG,cAAP,CAAsB,iBAAtB,CAFI,IAGJH,MAAM,CAACG,cAAP,CAAsB,mBAAtB,CAHI,IAIJH,MAAM,CAACG,cAAP,CAAsB,qBAAtB,CAJI,IAKJH,MAAM,CAACG,cAAP,CAAsB,wBAAtB,CALI,IAMJH,MAAM,CAACG,cAAP,CAAsB,gBAAtB,CANI,IAOJH,MAAM,CAACG,cAAP,CAAsB,QAAtB,CAPI,IAQJH,MAAM,CAACG,cAAP,CAAsB,oBAAtB,CARI,IASJH,MAAM,CAACG,cAAP,CAAsB,sBAAtB,CATI,IAUJH,MAAM,CAACG,cAAP,CAAsB,WAAtB,CAVI,IAWJH,MAAM,CAACG,cAAP,CAAsB,UAAtB,CAXJ;EAYH,CAhBD;;EAiBA,OAAO7B,uBAAP;AACH,CArE4C,EAA7C;;AAuEA,SAASA,uBAAT"},"metadata":{},"sourceType":"module"}