{"ast":null,"code":"/*! @azure/msal-browser v2.38.3 2023-10-27 */\n'use strict';\n\nimport { __extends, __awaiter, __generator, __assign } from '../_virtual/_tslib.js';\nimport { StandardInteractionClient } from './StandardInteractionClient.js';\nimport { PerformanceEvents, AuthError, RefreshTokenClient } from '@azure/msal-common';\nimport { ApiId } from '../utils/BrowserConstants.js';\nimport { BrowserAuthError } from '../error/BrowserAuthError.js';\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n\nvar SilentRefreshClient =\n/** @class */\nfunction (_super) {\n  __extends(SilentRefreshClient, _super);\n\n  function SilentRefreshClient() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * Exchanges the refresh token for new tokens\r\n   * @param request\r\n   */\n\n\n  SilentRefreshClient.prototype.acquireToken = function (request) {\n    return __awaiter(this, void 0, void 0, function () {\n      var silentRequest, _a, acquireTokenMeasurement, serverTelemetryManager, refreshTokenClient;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, request.correlationId);\n            this.performanceClient.setPreQueueTime(PerformanceEvents.InitializeBaseRequest, request.correlationId);\n            _a = [__assign({}, request)];\n            return [4\n            /*yield*/\n            , this.initializeBaseRequest(request, request.account)];\n\n          case 1:\n            silentRequest = __assign.apply(void 0, _a.concat([_b.sent()]));\n            acquireTokenMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, silentRequest.correlationId);\n            serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow);\n            return [4\n            /*yield*/\n            , this.createRefreshTokenClient(serverTelemetryManager, silentRequest.authority, silentRequest.azureCloudOptions)];\n\n          case 2:\n            refreshTokenClient = _b.sent();\n            this.logger.verbose(\"Refresh token client created\"); // Send request to renew token. Auth module will throw errors if token cannot be renewed.\n\n            this.performanceClient.setPreQueueTime(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);\n            return [2\n            /*return*/\n            , refreshTokenClient.acquireTokenByRefreshToken(silentRequest).then(function (result) {\n              acquireTokenMeasurement.endMeasurement({\n                success: true,\n                fromCache: result.fromCache,\n                requestId: result.requestId\n              });\n              return result;\n            }).catch(function (e) {\n              if (e instanceof AuthError) {\n                e.setCorrelationId(_this.correlationId);\n              }\n\n              serverTelemetryManager.cacheFailedRequest(e);\n              acquireTokenMeasurement.endMeasurement({\n                errorCode: e.errorCode,\n                subErrorCode: e.subError,\n                success: false\n              });\n              throw e;\n            })];\n        }\n      });\n    });\n  };\n  /**\r\n   * Currently Unsupported\r\n   */\n\n\n  SilentRefreshClient.prototype.logout = function () {\n    // Synchronous so we must reject\n    return Promise.reject(BrowserAuthError.createSilentLogoutUnsupportedError());\n  };\n  /**\r\n   * Creates a Refresh Client with the given authority, or the default authority.\r\n   * @param serverTelemetryManager\r\n   * @param authorityUrl\r\n   */\n\n\n  SilentRefreshClient.prototype.createRefreshTokenClient = function (serverTelemetryManager, authorityUrl, azureCloudOptions) {\n    return __awaiter(this, void 0, void 0, function () {\n      var clientConfig;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // Create auth module.\n            this.performanceClient.setPreQueueTime(PerformanceEvents.StandardInteractionClientGetClientConfiguration, this.correlationId);\n            return [4\n            /*yield*/\n            , this.getClientConfiguration(serverTelemetryManager, authorityUrl, azureCloudOptions)];\n\n          case 1:\n            clientConfig = _a.sent();\n            return [2\n            /*return*/\n            , new RefreshTokenClient(clientConfig, this.performanceClient)];\n        }\n      });\n    });\n  };\n\n  return SilentRefreshClient;\n}(StandardInteractionClient);\n\nexport { SilentRefreshClient };","map":{"version":3,"names":["__extends","__awaiter","__generator","__assign","StandardInteractionClient","PerformanceEvents","AuthError","RefreshTokenClient","ApiId","BrowserAuthError","SilentRefreshClient","_super","apply","arguments","prototype","acquireToken","request","silentRequest","_a","acquireTokenMeasurement","serverTelemetryManager","refreshTokenClient","_this","_b","label","performanceClient","addQueueMeasurement","SilentRefreshClientAcquireToken","correlationId","setPreQueueTime","InitializeBaseRequest","initializeBaseRequest","account","concat","sent","startMeasurement","initializeServerTelemetryManager","acquireTokenSilent_silentFlow","createRefreshTokenClient","authority","azureCloudOptions","logger","verbose","RefreshTokenClientAcquireTokenByRefreshToken","acquireTokenByRefreshToken","then","result","endMeasurement","success","fromCache","requestId","catch","e","setCorrelationId","cacheFailedRequest","errorCode","subErrorCode","subError","logout","Promise","reject","createSilentLogoutUnsupportedError","authorityUrl","clientConfig","StandardInteractionClientGetClientConfiguration","getClientConfiguration"],"sources":["F:/Bovis/Front/bovis-dev/node_modules/@azure/msal-browser/dist/interaction_client/SilentRefreshClient.js"],"sourcesContent":["/*! @azure/msal-browser v2.38.3 2023-10-27 */\n'use strict';\nimport { __extends, __awaiter, __generator, __assign } from '../_virtual/_tslib.js';\nimport { StandardInteractionClient } from './StandardInteractionClient.js';\nimport { PerformanceEvents, AuthError, RefreshTokenClient } from '@azure/msal-common';\nimport { ApiId } from '../utils/BrowserConstants.js';\nimport { BrowserAuthError } from '../error/BrowserAuthError.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\nvar SilentRefreshClient = /** @class */ (function (_super) {\r\n    __extends(SilentRefreshClient, _super);\r\n    function SilentRefreshClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Exchanges the refresh token for new tokens\r\n     * @param request\r\n     */\r\n    SilentRefreshClient.prototype.acquireToken = function (request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var silentRequest, _a, acquireTokenMeasurement, serverTelemetryManager, refreshTokenClient;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, request.correlationId);\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.InitializeBaseRequest, request.correlationId);\r\n                        _a = [__assign({}, request)];\r\n                        return [4 /*yield*/, this.initializeBaseRequest(request, request.account)];\r\n                    case 1:\r\n                        silentRequest = __assign.apply(void 0, _a.concat([_b.sent()]));\r\n                        acquireTokenMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, silentRequest.correlationId);\r\n                        serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow);\r\n                        return [4 /*yield*/, this.createRefreshTokenClient(serverTelemetryManager, silentRequest.authority, silentRequest.azureCloudOptions)];\r\n                    case 2:\r\n                        refreshTokenClient = _b.sent();\r\n                        this.logger.verbose(\"Refresh token client created\");\r\n                        // Send request to renew token. Auth module will throw errors if token cannot be renewed.\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);\r\n                        return [2 /*return*/, refreshTokenClient.acquireTokenByRefreshToken(silentRequest)\r\n                                .then(function (result) {\r\n                                acquireTokenMeasurement.endMeasurement({\r\n                                    success: true,\r\n                                    fromCache: result.fromCache,\r\n                                    requestId: result.requestId\r\n                                });\r\n                                return result;\r\n                            })\r\n                                .catch(function (e) {\r\n                                if (e instanceof AuthError) {\r\n                                    e.setCorrelationId(_this.correlationId);\r\n                                }\r\n                                serverTelemetryManager.cacheFailedRequest(e);\r\n                                acquireTokenMeasurement.endMeasurement({\r\n                                    errorCode: e.errorCode,\r\n                                    subErrorCode: e.subError,\r\n                                    success: false\r\n                                });\r\n                                throw e;\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Currently Unsupported\r\n     */\r\n    SilentRefreshClient.prototype.logout = function () {\r\n        // Synchronous so we must reject\r\n        return Promise.reject(BrowserAuthError.createSilentLogoutUnsupportedError());\r\n    };\r\n    /**\r\n     * Creates a Refresh Client with the given authority, or the default authority.\r\n     * @param serverTelemetryManager\r\n     * @param authorityUrl\r\n     */\r\n    SilentRefreshClient.prototype.createRefreshTokenClient = function (serverTelemetryManager, authorityUrl, azureCloudOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var clientConfig;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Create auth module.\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.StandardInteractionClientGetClientConfiguration, this.correlationId);\r\n                        return [4 /*yield*/, this.getClientConfiguration(serverTelemetryManager, authorityUrl, azureCloudOptions)];\r\n                    case 1:\r\n                        clientConfig = _a.sent();\r\n                        return [2 /*return*/, new RefreshTokenClient(clientConfig, this.performanceClient)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SilentRefreshClient;\r\n}(StandardInteractionClient));\n\nexport { SilentRefreshClient };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}